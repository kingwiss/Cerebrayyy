<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Card Input Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .panel h2 {
            color: #667eea;
            margin-top: 0;
        }
        .test-instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
        }
        .test-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #dee2e6;
        }
        .test-card h4 {
            margin: 0 0 10px 0;
            color: #495057;
        }
        .test-card code {
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: bold;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .checklist li:before {
            content: '‚òê ';
            color: #666;
            font-weight: bold;
            margin-right: 8px;
        }
        .iframe-container {
            border: 2px solid #667eea;
            border-radius: 8px;
            overflow: hidden;
            height: 600px;
        }
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .status-check {
            background: #fff3cd;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            border: 1px solid #ffeaa7;
        }
        .important-note {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #f5c6cb;
        }
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="panel">
            <h2>üß™ Manual Card Input Test</h2>
            
            <div class="test-instructions">
                <h3>üìã Testing Instructions</h3>
                <p>Follow these steps to verify the payment form works for real customers:</p>
            </div>

            <div class="important-note">
                <strong>‚ö†Ô∏è Important:</strong> Only use Stripe test cards. Never use real card numbers in test mode.
            </div>

            <h3>üí≥ Stripe Test Cards</h3>
            <div class="test-card">
                <h4>‚úÖ Successful Payment</h4>
                <code>4242 4242 4242 4242</code>
                <p><strong>Expiry:</strong> Any future date (e.g., 12/25)<br>
                <strong>CVC:</strong> Any 3 digits (e.g., 123)<br>
                <strong>Postal Code:</strong> Any 5 digits (e.g., 12345)</p>
            </div>

            <div class="test-card">
                <h4>‚ùå Card Declined</h4>
                <code>4000 0000 0000 0002</code>
                <p>Use this to test error handling</p>
            </div>

            <div class="test-card">
                <h4>üí∞ Insufficient Funds</h4>
                <code>4000 0000 0000 9995</code>
                <p>Tests insufficient funds scenario</p>
            </div>

            <h3>‚úÖ Testing Checklist</h3>
            <ul class="checklist">
                <li>Card number field accepts input and formats correctly</li>
                <li>Expiry date field accepts MM/YY format</li>
                <li>CVC field accepts 3-4 digit codes</li>
                <li>Email field validates email format</li>
                <li>Postal code field accepts input</li>
                <li>Form validates required fields</li>
                <li>Successful payment with test card 4242...</li>
                <li>Error handling with declined card 4000...0002</li>
                <li>Payment button shows loading state</li>
                <li>Success message appears after payment</li>
                <li>Debug info shows Stripe elements are mounted</li>
            </ul>

            <div class="status-check">
                <h4>üîç What to Look For:</h4>
                <ul>
                    <li><strong>Card Fields:</strong> Should be clickable and accept input</li>
                    <li><strong>Real-time Validation:</strong> Fields should show errors for invalid input</li>
                    <li><strong>Visual Feedback:</strong> Fields should highlight when focused</li>
                    <li><strong>Debug Panel:</strong> Should show ‚úÖ for all Stripe components</li>
                    <li><strong>Payment Processing:</strong> Button should show "Processing..." during payment</li>
                </ul>
            </div>

            <div class="important-note">
                <h4>üö® If Card Fields Don't Work:</h4>
                <ul>
                    <li>Check browser console for JavaScript errors</li>
                    <li>Verify Stripe Elements are mounted (check debug panel)</li>
                    <li>Ensure both servers are running (main + Stripe)</li>
                    <li>Try refreshing the page</li>
                    <li>Test in different browser if needed</li>
                </ul>
            </div>
        </div>

        <div class="panel">
            <h2>üí≥ Live Payment Form</h2>
            <p>Test the actual payment form below using the test cards from the left panel.</p>
            
            <div class="iframe-container">
                <iframe 
                    src="https://localhost:8000/payment.html" 
                    title="Payment Form Test"
                    sandbox="allow-scripts allow-same-origin allow-forms"
                ></iframe>
            </div>
        </div>
    </div>

    <script>
        // Add some basic interaction tracking
        window.addEventListener('message', function(event) {
            if (event.origin !== 'https://localhost:8000') return;
            
            console.log('Message from payment form:', event.data);
            
            // You could add more sophisticated testing here
            // For example, listening for payment success/failure events
        });

        // Check if the iframe loads successfully
        const iframe = document.querySelector('iframe');
        iframe.addEventListener('load', function() {
            console.log('‚úÖ Payment form loaded successfully');
        });
        
        iframe.addEventListener('error', function() {
            console.error('‚ùå Failed to load payment form');
        });
    </script>
</body>
</html>