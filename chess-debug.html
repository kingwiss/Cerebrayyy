<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Pieces Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .piece-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        .piece-item {
            text-align: center;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .piece-item img {
            width: 45px;
            height: 45px;
            display: block;
            margin: 0 auto 5px;
        }
        #chessBoard {
            margin: 20px auto;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
    
    <!-- Chess libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    
    <!-- Our chess pieces -->
    <script src="chess-pieces.js"></script>
</head>
<body>
    <div class="container">
        <h1>üîç Chess Pieces Debug Test</h1>
        
        <div class="test-section">
            <h2>1. Library Status</h2>
            <div id="libraryStatus"></div>
        </div>
        
        <div class="test-section">
            <h2>2. Chess Piece Theme Status</h2>
            <div id="pieceThemeStatus"></div>
        </div>
        
        <div class="test-section">
            <h2>3. Individual Piece Images</h2>
            <div class="piece-grid" id="pieceGrid"></div>
        </div>
        
        <div class="test-section">
            <h2>4. Chess Board Test</h2>
            <div id="chessBoard" style="width: 400px;"></div>
            <button onclick="testBoard()" style="margin: 10px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Create Test Board</button>
        </div>
    </div>

    <script>
        // Test functions
        function checkLibraries() {
            const status = document.getElementById('libraryStatus');
            let html = '';
            
            if (typeof jQuery !== 'undefined') {
                html += '<div class="status success">‚úÖ jQuery loaded</div>';
            } else {
                html += '<div class="status error">‚ùå jQuery not loaded</div>';
            }
            
            if (typeof Chess !== 'undefined') {
                html += '<div class="status success">‚úÖ Chess.js loaded</div>';
            } else {
                html += '<div class="status error">‚ùå Chess.js not loaded</div>';
            }
            
            if (typeof Chessboard !== 'undefined') {
                html += '<div class="status success">‚úÖ Chessboard.js loaded</div>';
            } else {
                html += '<div class="status error">‚ùå Chessboard.js not loaded</div>';
            }
            
            status.innerHTML = html;
        }
        
        function checkPieceTheme() {
            const status = document.getElementById('pieceThemeStatus');
            let html = '';
            
            if (window.chessPieceTheme) {
                html += '<div class="status success">‚úÖ Chess piece theme loaded</div>';
                html += '<div class="status info">üìã Available pieces: ' + Object.keys(window.chessPieceTheme).join(', ') + '</div>';
                
                // Test a few piece URLs
                const testPieces = ['wK', 'bQ', 'wP'];
                testPieces.forEach(piece => {
                    if (window.chessPieceTheme[piece]) {
                        html += '<div class="status success">‚úÖ ' + piece + ': ' + window.chessPieceTheme[piece].substring(0, 50) + '...</div>';
                    } else {
                        html += '<div class="status error">‚ùå ' + piece + ': not found</div>';
                    }
                });
            } else {
                html += '<div class="status error">‚ùå Chess piece theme not loaded</div>';
            }
            
            status.innerHTML = html;
        }
        
        function showPieceImages() {
            const grid = document.getElementById('pieceGrid');
            const pieces = ['wK', 'wQ', 'wR', 'wB', 'wN', 'wP', 'bK', 'bQ', 'bR', 'bB', 'bN', 'bP'];
            
            let html = '';
            pieces.forEach(piece => {
                const url = window.chessPieceTheme ? window.chessPieceTheme[piece] : '';
                html += `
                    <div class="piece-item">
                        <img src="${url}" alt="${piece}" onerror="this.style.background='#ffcccc'; this.alt='‚ùå Failed'">
                        <div>${piece}</div>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        }
        
        function testBoard() {
            if (typeof Chessboard === 'undefined') {
                alert('Chessboard.js not loaded!');
                return;
            }
            
            const config = {
                draggable: false,
                position: 'start',
                pieceTheme: function(piece) {
                    console.log('Board requesting piece:', piece);
                    if (window.chessPieceTheme && window.chessPieceTheme[piece]) {
                        console.log('Returning custom piece for:', piece);
                        return window.chessPieceTheme[piece];
                    }
                    console.log('Returning fallback for:', piece);
                    return 'https://chessboardjs.com/img/chesspieces/wikipedia/' + piece + '.png';
                }
            };
            
            try {
                const board = Chessboard('chessBoard', config);
                console.log('Board created successfully');
            } catch (error) {
                console.error('Error creating board:', error);
                alert('Error creating board: ' + error.message);
            }
        }
        
        // Run tests when page loads
        window.addEventListener('load', function() {
            setTimeout(() => {
                checkLibraries();
                checkPieceTheme();
                showPieceImages();
            }, 500);
        });
    </script>
</body>
</html>